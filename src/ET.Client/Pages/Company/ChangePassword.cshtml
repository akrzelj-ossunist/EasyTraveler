@page
@model ET.Client.Pages.Company.ChangePasswordModel
@{
	ViewData["Title"] = "Change Password";
}

<div class="container mt-5">
	<div class="row">
		<div class="col-md-6 offset-md-3">
			<div class="card">
				<div class="card-header">
					<h3 class="text-center">Company Profile</h3>
				</div>
				@if (!Model.IsPasswordChanged)
				{
					<div class="alert alert-danger" role="alert">
						Incorrect current password. Please try again.
					</div>
				}
				<form method="post" onsubmit="return validatePasswords()">
					<div class="form-group p-2">
						<label for="CurrentPassword">Current Password</label>
						<input type="password" class="form-control" id="CurrentPassword" name="CurrentPassword" placeholder="Enter your current password" required>
					</div>
					<div class="form-group p-2">
						<label for="NewPassword">New Password</label>
						<input type="password" class="form-control" id="NewPassword" name="NewPassword" placeholder="Enter your new password" required>
					</div>
					<div class="form-group p-2">
						<label for="ConfirmNewPassword">Confirm New Password</label>
						<input type="password" class="form-control" id="ConfirmNewPassword" name="NewPasswordRepeat" placeholder="Confirm your new password" required>
						<div id="passwordMatchError" class="text-danger"></div>
					</div>
					<div class="text-center m-4">
						<button type="submit" class="btn btn-primary m-2">Save</button>
						<a class="btn btn-danger m-2" asp-page="/Company/Profile">Cancel</a>
					</div>
				</form>
			</div>
		</div>
	</div>
</div>

<script>
	function validatePasswords() {
		var newPassword = document.getElementById("NewPassword").value;
		var confirmNewPassword = document.getElementById("ConfirmNewPassword").value;

		if (newPassword !== confirmNewPassword) {
			document.getElementById("passwordMatchError").innerText = "The new passwords do not match.";
			return false;
		}

		return true;
	}
</script>
